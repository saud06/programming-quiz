{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { get, getDatabase, query, ref } from 'firebase/database';\nimport { useEffect, useState } from \"react\";\nexport default function useVideoList() {\n  _s();\n\n  const [loader, setLoader] = useState(true);\n  const [error, setError] = useState(false);\n  const [videos, setVideos] = useState([]);\n  useEffect(() => {\n    async function fetchVideos() {\n      const db = getDatabase();\n      const videosRef = ref(db, 'videos');\n      const videoQuery = query(videosRef // orderByKey()\n      );\n\n      try {\n        setError(false);\n        setLoader(true); // request firebase database\n\n        const snapshot = await get(videoQuery);\n        console.log(snapshot);\n        setLoader(false); // check if snapshot has data. return true / false\n\n        if (snapshot.exists()) {\n          // get previous state data first\n          setVideos(prevVideos => {\n            // return an array of previous destructured value, plus values from snapshot object\n            return [...prevVideos, Object.values(snapshot.val())];\n          });\n        }\n      } catch (err) {\n        console.log(err);\n        setLoader(false);\n        setError(true);\n      }\n    }\n\n    fetchVideos();\n  }, []);\n  return {\n    loader,\n    error,\n    videos\n  };\n}\n\n_s(useVideoList, \"bl2Eku41iN/sFpEg0OckdB4t4aU=\");","map":{"version":3,"names":["get","getDatabase","query","ref","useEffect","useState","useVideoList","loader","setLoader","error","setError","videos","setVideos","fetchVideos","db","videosRef","videoQuery","snapshot","console","log","exists","prevVideos","Object","values","val","err"],"sources":["/usr/local/ampps/www/react-quiz/src/hooks/useVideoList.js"],"sourcesContent":["import { get, getDatabase, query, ref } from 'firebase/database';\nimport { useEffect, useState } from \"react\";\n\nexport default function useVideoList(){\n  const [loader, setLoader] = useState(true);\n  const [error, setError] = useState(false);\n  const [videos, setVideos] = useState([]);\n\n  useEffect(() => {\n    async function fetchVideos(){\n      const db = getDatabase();\n      const videosRef = ref(db, 'videos');\n      const videoQuery = query(\n        videosRef,\n        // orderByKey()\n      );\n\n      try {\n        setError(false);\n        setLoader(true);\n\n        // request firebase database\n        const snapshot = await get(videoQuery);\n        console.log(snapshot);\n\n        setLoader(false);\n\n        // check if snapshot has data. return true / false\n        if(snapshot.exists()){\n          // get previous state data first\n          setVideos((prevVideos) => {\n            // return an array of previous destructured value, plus values from snapshot object\n            return [...prevVideos, Object.values(snapshot.val())];\n          });\n        }\n      } catch (err) {\n        console.log(err);\n\n        setLoader(false);\n        setError(true);\n      }\n    }\n\n    fetchVideos();\n  }, []);\n\n  return {\n    loader,\n    error,\n    videos,\n  }\n}"],"mappings":";;AAAA,SAASA,GAAT,EAAcC,WAAd,EAA2BC,KAA3B,EAAkCC,GAAlC,QAA6C,mBAA7C;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,eAAe,SAASC,YAAT,GAAuB;EAAA;;EACpC,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBH,QAAQ,CAAC,IAAD,CAApC;EACA,MAAM,CAACI,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,KAAD,CAAlC;EACA,MAAM,CAACM,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,EAAD,CAApC;EAEAD,SAAS,CAAC,MAAM;IACd,eAAeS,WAAf,GAA4B;MAC1B,MAAMC,EAAE,GAAGb,WAAW,EAAtB;MACA,MAAMc,SAAS,GAAGZ,GAAG,CAACW,EAAD,EAAK,QAAL,CAArB;MACA,MAAME,UAAU,GAAGd,KAAK,CACtBa,SADsB,CAEtB;MAFsB,CAAxB;;MAKA,IAAI;QACFL,QAAQ,CAAC,KAAD,CAAR;QACAF,SAAS,CAAC,IAAD,CAAT,CAFE,CAIF;;QACA,MAAMS,QAAQ,GAAG,MAAMjB,GAAG,CAACgB,UAAD,CAA1B;QACAE,OAAO,CAACC,GAAR,CAAYF,QAAZ;QAEAT,SAAS,CAAC,KAAD,CAAT,CARE,CAUF;;QACA,IAAGS,QAAQ,CAACG,MAAT,EAAH,EAAqB;UACnB;UACAR,SAAS,CAAES,UAAD,IAAgB;YACxB;YACA,OAAO,CAAC,GAAGA,UAAJ,EAAgBC,MAAM,CAACC,MAAP,CAAcN,QAAQ,CAACO,GAAT,EAAd,CAAhB,CAAP;UACD,CAHQ,CAAT;QAID;MACF,CAlBD,CAkBE,OAAOC,GAAP,EAAY;QACZP,OAAO,CAACC,GAAR,CAAYM,GAAZ;QAEAjB,SAAS,CAAC,KAAD,CAAT;QACAE,QAAQ,CAAC,IAAD,CAAR;MACD;IACF;;IAEDG,WAAW;EACZ,CApCQ,EAoCN,EApCM,CAAT;EAsCA,OAAO;IACLN,MADK;IAELE,KAFK;IAGLE;EAHK,CAAP;AAKD;;GAhDuBL,Y"},"metadata":{},"sourceType":"module"}